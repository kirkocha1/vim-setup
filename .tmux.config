##### essentials
set -g mouse on
set -g history-limit 100000
set -g default-terminal "tmux-256color"
set -g mode-keys vi
set -g set-clipboard on

set -g allow-passthrough on
set -g terminal-features "*,clipboard"
set -g terminal-overrides "*,Ms=\E]52;c;%p1%s\a"



##### clean up any earlier bindings
unbind -T copy-mode-vi y
unbind -T copy-mode y
unbind -T copy-mode-vi Enter
unbind -T copy-mode Enter
unbind -T copy-mode-vi MouseDragEnd1Pane
unbind -T copy-mode MouseDragEnd1Pane

##### copy -> pipe to helper (writes to the active client TTY) -> auto-cancel
bind -T copy-mode-vi y     send -X copy-pipe-and-cancel "$HOME/bin/osc52-tty #{client_tty}"
bind -T copy-mode     y     send -X copy-pipe-and-cancel "$HOME/bin/osc52-tty #{client_tty}"

bind -T copy-mode-vi Enter send -X copy-pipe-and-cancel "$HOME/bin/osc52-tty #{client_tty}"
bind -T copy-mode     Enter send -X copy-pipe-and-cancel "$HOME/bin/osc52-tty #{client_tty}"

# Optional: mouse drag auto-copy
bind -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "$HOME/bin/osc52-tty #{client_tty}"
bind -T copy-mode     MouseDragEnd1Pane send -X copy-pipe-and-cancel "$HOME/bin/osc52-tty #{client_tty}"
